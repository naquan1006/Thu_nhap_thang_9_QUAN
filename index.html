<!DOCTYPE html>
<html lang='vi'>
<head>
<meta charset='utf-8' />
<meta name='viewport' content='width=device-width, initial-scale=1' />
<title>Thống kê thu nhập - Tháng 9/2025 (Nhóm chị Nhung)</title>
<style>
  :root{--bg:#f7f7fb;--card:#ffffff;--ink:#0f172a;--muted:#475569;--accent:#2563eb;--accent-2:#10b981;--border:#e5e7eb}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto}
  .wrap{display:grid;grid-template-columns:280px 1fr 420px;gap:16px;max-width:1280px;margin:24px auto;padding:0 16px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.06)}
  .pane{padding:16px}
  h1{font-size:22px;margin:0 0 8px}
  h2{font-size:16px;margin:0 0 8px;color:var(--muted)}
  .list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .item{padding:12px 14px;border:1px solid var(--border);border-radius:12px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
  .item.active{border-color:var(--accent);outline:2px solid rgba(37,99,235,.15);background:#f2f6ff}
  .badge{font-size:12px;color:#fff;background:var(--accent);padding:4px 10px;border-radius:999px}
  .muted{color:var(--muted)}
  .calendar{padding:8px}
  .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
  .dow{font-weight:700;text-align:center;padding:8px 0;color:var(--muted)}
  .day{height:80px;background:#fff;border:1px solid var(--border);border-radius:10px;padding:6px;position:relative}
  .day .d{position:absolute;top:6px;right:8px;font-size:12px;color:var(--muted)}
  .day.has{border-color:var(--accent-2);box-shadow:inset 0 0 0 2px rgba(16,185,129,.2)}
  .pill{position:absolute;left:6px;bottom:6px;font-size:11px;background:var(--accent-2);color:#fff;border-radius:999px;padding:2px 6px}
  .divider{height:1px;background:var(--border);margin:12px 0}
  .total{font-size:22px;font-weight:800;margin-top:8px}
  ul{margin:6px 0 0 18px;padding:0}
  li{margin:4px 0}
  .footer{padding:12px 16px;color:var(--muted);text-align:center}

  .topbar{display:none}
  .select{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;background:#fff;font-size:16px}

  @media (max-width: 900px){
    .wrap{grid-template-columns:1fr; gap:12px; margin:12px auto;}
    .topbar{display:block; position:sticky; top:0; z-index:10; background:var(--bg); padding:12px 0}
    #left{display:none}
    #mid{order:2}
    #right{order:3}
    .day{height:64px}
  }
</style>
</head>
<body>
  <div class='topbar'>
    <div class='pane card' style='padding:12px'>
      <div style='display:flex;gap:8px;align-items:center;flex-wrap:wrap'>
        <div style='font-weight:700'>Tháng 9/2025 – Nhóm chị Nhung</div>
        <div style='flex:1'></div>
        <label for='mobileSelect' class='muted' style='font-size:14px'>Chọn lớp:</label>
        <select id='mobileSelect' class='select'></select>
      </div>
    </div>
  </div>

  <div class='wrap'>
    <aside class='card pane' id='left'>
      <h1>Tháng 9/2025</h1>
      <h2>Nhóm chị Nhung</h2>
      <div class='list' id='classList'></div>
      <div class='divider'></div>
      <div class='muted'>Chọn lớp ở đây để xem ngày đã ghi nhận và tổng lớp. (ĐÃ loại <b>R103 – Bơ &amp; Nguyên</b> khỏi thống kê.)</div>
    </aside>

    <main class='card pane' id='mid'>
      <h2 id='calTitle'>Lịch tháng 9/2025</h2>
      <div class='calendar'>
        <div class='cal-grid' id='dow'></div>
        <div class='cal-grid' id='days'></div>
      </div>
    </main>

    <aside class='card pane' id='right'>
      <h2>Thông tin lớp</h2>
      <div id='i_name' style='font-weight:700;margin-bottom:6px'>—</div>
      <div><span class='muted'>Học phí/buổi:</span> <span id='i_fee'>—</span></div>
      <div><span class='muted'>Số buổi tính phí:</span> <span id='i_count'>—</span></div>
      <div><span class='muted'>Tổng lớp:</span> <span id='i_sum'>—</span></div>
      <div class='divider'></div>
      <h2>Ngày đã ghi nhận</h2>
      <ul id='i_dates'></ul>
      <div class='divider'></div>
      <h2>Tổng tháng 9 (toàn nhóm)</h2>
      <div class='total' id='grandTotal'>—</div>
    </aside>
  </div>
  <div class='footer'>Generated for Nguyễn Anh Quan • Tháng 9/2025</div>

<script>
const VN_WEEKDAYS = ['Chủ Nhật','Thứ Hai','Thứ Ba','Thứ Tư','Thứ Năm','Thứ Sáu','Thứ Bảy'];
function vnd(n){return n.toLocaleString('vi-VN')+ ' VND'}
function fmtDay(iso){const d=new Date(iso+'T00:00:00'); const wd=VN_WEEKDAYS[d.getDay()]; const dd=String(d.getDate()).padStart(2,'0'); const mm=String(d.getMonth()+1).padStart(2,'0'); const yyyy=d.getFullYear(); return `${wd}, ${dd}/${mm}/${yyyy}`}

const data = {
  month: 9,
  year: 2025,
  classes: [
    { id: 'S105-CL', name: 'S105 – Chi & Lâm', fee: 250000, dates: ['2025-09-03','2025-09-06','2025-09-13','2025-09-20'] },
    { id: 'S105-KMQ', name: 'S105 – Khang & Minh & Quyên', fee: 300000, dates: ['2025-09-03','2025-09-06','2025-09-13','2025-09-20'] },
    { id: 'R103-QKNA', name: 'R103 – Quang Khang & Nhật Anh', fee: 250000, dates: ['2025-09-03','2025-09-17'] },
    { id: 'R103-Khoai', name: 'R103 – Khoai', fee: 210000, dates: ['2025-09-06','2025-09-13','2025-09-20'] },
    { id: 'S-ThuBong', name: 'Thư & Bỏng', fee: 420000, dates: ['2025-09-16','2025-09-23','2025-09-30'] }
  ]
};

const classList = document.getElementById('classList');
const mobileSelect = document.getElementById('mobileSelect');
let activeId = data.classes[0]?.id || null;

data.classes.forEach((c)=>{
  const div = document.createElement('div');
  div.className = 'item';
  div.dataset.id = c.id;
  const count = c.dates.length;
  div.innerHTML = `<span>${c.name}</span><span class='badge'>${count} buổi</span>`;
  div.onclick = ()=> selectClass(c.id);
  classList.appendChild(div);
  const opt = document.createElement('option');
  opt.value = c.id; opt.textContent = c.name; mobileSelect.appendChild(opt);
});

mobileSelect.addEventListener('change', (e)=> selectClass(e.target.value));

function selectClass(id){
  activeId = id;
  document.querySelectorAll('.item').forEach(el=>{
    el.classList.toggle('active', el.dataset.id===id);
  });
  if(mobileSelect.value !== id) mobileSelect.value = id;
  renderInfo();
  renderCalendar();
}

const dowEl = document.getElementById('dow');
['T2','T3','T4','T5','T6','T7','CN'].forEach(d=>{
  const c = document.createElement('div'); c.className='dow'; c.textContent=d; dowEl.appendChild(c);
});
const daysEl = document.getElementById('days');

function renderCalendar(){
  daysEl.innerHTML = '';
  const first = new Date(data.year, data.month-1, 1);
  const last = new Date(data.year, data.month, 0);
  const pad = (first.getDay()+6)%7;
  for(let i=0;i<pad;i++){ const cell=document.createElement('div'); cell.className='day'; cell.style.visibility='hidden'; daysEl.appendChild(cell); }
  const selected = data.classes.find(c=>c.id===activeId);
  const set = new Set(selected?.dates || []);
  for(let d=1; d<=last.getDate(); d++){
    const cell=document.createElement('div');
    cell.className = 'day';
    const iso = `${data.year}-${String(data.month).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    cell.innerHTML = `<div class='d'>${d}</div>`;
    if(set.has(iso)){
      cell.classList.add('has');
      const pill=document.createElement('div'); pill.className='pill'; pill.textContent='Đã ghi nhận'; cell.appendChild(pill);
    }
    daysEl.appendChild(cell);
  }
}

function renderInfo(){
  const info = data.classes.find(c=>c.id===activeId);
  const name = document.getElementById('i_name');
  const fee = document.getElementById('i_fee');
  const count = document.getElementById('i_count');
  const sum = document.getElementById('i_sum');
  const datesUL = document.getElementById('i_dates');
  if(!info){ name.textContent='—'; fee.textContent='—'; count.textContent='—'; sum.textContent='—'; datesUL.innerHTML=''; return; }
  name.textContent = info.name;
  fee.textContent = vnd(info.fee) + ' / buổi';
  count.textContent = info.dates.length + ' buổi';
  sum.textContent = vnd(info.dates.length * info.fee);
  datesUL.innerHTML = info.dates.map(d=>`<li>${fmtDay(d)}</li>`).join('');

  const grand = data.classes.reduce((acc,c)=> acc + c.fee * c.dates.length, 0);
  document.getElementById('grandTotal').textContent = vnd(grand);
}

selectClass(activeId);
</script>
</body>
</html>
